class PRRoot{constructor(t,s){this.root=t;this.dom=$(s);let e=t.components.length;this.dom.addClass(`pr-comp-${e}`);this.dom.attr("data-pr-comp-id",e);this.id=e;this.children=this.dom.children();this.state={};this.dom[0].prComp=this;this.stateBehaviorOverrides={};this.dom[0].onclick=(t=>this.click(t))}prepareStates(){let t=this.dom.html().split("${{");let s="";t.map((s,e)=>{let i=s.split("}}");let r=i[0];if(r!==s){let s=this.state[r];let a=s;console.log(s);if(this.stateBehaviorOverrides.hasOwnProperty(r)){a=this.stateBehaviorOverrides[r](s)}else if(Array.isArray(s)){let t="";s.map((s,e)=>{t+=`<div class="${r}-item" data-pr-id="${e}">${s}</div>`});a=t}i[0]=`<span class="pr-state" data-pr-identifier="${r}">${a}</span>`;t[e]=i.join("")}});s=t.join("");this.dom.html(s);this.refreshInputs();this.refreshStyles();this.refreshClasses();this.refreshAttributes();this.refreshSrc()}setState(t){Object.entries(t).map((t,s)=>{this.state[t[0]]=t[1]});this.refresh()}refresh(){let t=$(".pr-state");t.toArray().map((t,s)=>{let e=$(t);let i=e.attr("data-pr-identifier");let r=this.state[i];let a=r;if(this.stateBehaviorOverrides.hasOwnProperty(i)){a=this.stateBehaviorOverrides[i](r)}else if(Array.isArray(r)){let t="";r.map((s,e)=>{t+=`<div class="${i}-item" data-pr-id="${e}">${s}</div>`});a=t}e.html(a)});this.refreshInputs();this.refreshStyles();this.refreshClasses();this.refreshAttributes();this.refreshSrc()}refreshInputs(){let t=$(".pr-value");t.toArray().map((t,s)=>{let e=$(t).attr("data-pr-value-state");let i=this.state[e];let r=i;if(this.stateBehaviorOverrides.hasOwnProperty(e)){r=this.stateBehaviorOverrides[e](i)}t.value=r})}refreshClasses(){let t=$(".pr-class");t.toArray().map((t,s)=>{let e=$(t).attr("data-pr-class-state");let i=this.state[e];let r=i;if(this.stateBehaviorOverrides.hasOwnProperty(e)){r=this.stateBehaviorOverrides[e](i)}t.classList=[];r.push("pr-class");$(t).addClass(r)})}refreshSrc(){let t=$(".pr-src");t.toArray().map((t,s)=>{let e=$(t).attr("data-pr-src-state");let i=this.state[e];let r=i;if(this.stateBehaviorOverrides.hasOwnProperty(e)){r=this.stateBehaviorOverrides[e](i)}t.src=r})}refreshAttributes(){let t=$(".pr-attr");t.toArray().map((t,s)=>{let e=JSON.parse($(t).attr("data-pr-attr-states"));Object.keys(e).map(s=>{let i=e[s];let r=this.state[i];let a=r;if(this.stateBehaviorOverrides.hasOwnProperty(i)){a=this.stateBehaviorOverrides[i](r)}$(t).attr(s,a)})})}refreshStyles(){let t=$(".pr-style");t.toArray().map((t,s)=>{let e=$(t).attr("data-pr-style-state");let i=this.state[e];let r=i;if(this.stateBehaviorOverrides.hasOwnProperty(e)){r=this.stateBehaviorOverrides[e](i)}$(t).css(r)})}printState(){console.table(this.state)}click(){}}class PhotonReact{constructor(t={}){this.components=[];window.prState=t}setState(t){Object.entries(t).map((t,s)=>{window.state[t[0]]=t[1]})}getState(t){return window.state[t]}addComponent(t){this.components.push(new PRComp(this,t,this.components.length))}}$(document).ready(()=>{});